<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Admin - Qu·∫£n l√Ω b·∫°n ƒë·ªçc</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        html {
            font-family: Arial, Helvetica, sans-serif;
            overflow: hidden;
        }

        #Reader {
            scroll-behavior: smooth;
            width: calc(100% - 215px);
            height: 95vh;
            position: fixed;
            bottom: 0;
            right: 0;
            overflow-y: auto;
        }

        #ThueSach {
            overflow: hidden;
        }
    </style>
    <link rel="stylesheet" href="../css/style_Readermanagement.css">
</head>
<body>
    <div id="ThueSach">
        <div id="Reader">
            <div id="header">
                <p>Qu·∫£n l√Ω b·∫°n ƒë·ªçc</p>
            </div>
            <div id="container">
                <!-- B·ªô l·ªçc -->
                <div class="box-fil">
                    <div id="fil">
                        <p class="f13px">B·ªô l·ªçc v√† t√¨m ki·∫øm</p>
                    </div>
                    <div id="search">
                        <button class="btn-fil" id="All">T·∫•t c·∫£</button>
                        <button class="btn-fil" id="Active">Ho·∫°t ƒë·ªông</button>
                        <button class="btn-fil" id="No-active">Kh√¥ng ho·∫°t ƒë·ªông</button>
                        <button class="btn-fil" id="en"
                            style="background-color: green; color: white; float: right; margin-left:0px; margin-right: 10px; cursor:pointer">
                            T√¨m ki·∫øm
                        </button>
                        <input type="search" placeholder="T√¨m ki·∫øm b·∫°n ƒë·ªçc" id="search-bd" />
                    </div>
                </div>

                <!-- Danh s√°ch b·∫°n ƒë·ªçc -->
                <div class="box-fil">
                    <div id="fil">
                        <p class="f13px">Danh s√°ch b·∫°n ƒë·ªçc</p>
                    </div>
                    <div id="search">
                        <button class="btn-fil" onclick="loadPage('../html/AddBD.html','initAddBD')">+ Th√™m m·ªõi</button>
                    </div>
                    <div id="title-name">
                        <table class="table table-hover table-sm">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>M√£ b·∫°n ƒë·ªçc</th>
                                    <th>S·ªë th·∫ª</th>
                                    <th>H·ªç t√™n</th>
                                    <th>Email</th>
                                    <th>SƒêT</th>
                                    <th>H·∫°n th·∫ª</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody id="bd-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- loadPage chung cho admin -->
    <script>
        window.loadPage = async function (page, afterLoadFnName) {
            console.log(`üìÑ Loading page: ${page}, callback: ${afterLoadFnName}`);
            try {
                const res = await fetch(page);
                if (!res.ok) throw new Error('HTTP ' + res.status);
                const html = await res.text();
                const reader = document.getElementById('Reader');
                reader.innerHTML = html;

                setTimeout(() => {
                    if (afterLoadFnName && typeof window[afterLoadFnName] === 'function') {
                        console.log(`‚úÖ G·ªçi callback: ${afterLoadFnName}()`);
                        window[afterLoadFnName]();
                    } else {
                        console.warn(`‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y function: ${afterLoadFnName}`);
                    }
                }, 50);
            } catch (err) {
                console.error('‚ùå L·ªói load page:', err);
                document.getElementById('Reader').innerHTML =
                    "<p style='color:red'>Kh√¥ng t·∫£i ƒë∆∞·ª£c trang.</p>";
            }
        };
    </script>

    <script>
        // T·ª± ƒë·ªông kh·ªüi t·∫°o khi load trang
        if (typeof window.initReaderPage === 'function') {
            window.initReaderPage();
        }
    </script>

    <!-- JS qu·∫£n l√Ω b·∫°n ƒë·ªçc + xo√° + thanh to√°n -->
    <script src="../js/BanDoc.js" defer></script>
    <script src="../js/XoaBD.js" defer></script>
</body>
</html>
